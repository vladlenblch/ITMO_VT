ORG 0x10

START:
    CLA

INPUT:
    IN 7
    AND #0x40
    BEQ INPUT
    IN 6
    ST TEMP

    LD TEMP
    AND #0x80
    BEQ CONVERT
    LD TEMP
    NEG
    ST TEMP

CONVERT:
    CLA
    ST HUNDREDS
    ST TENS
    ST UNITS

COUNT_HUNDREDS:
    LD TEMP
    CMP #100
    BMI COUNT_TENS
    SUB #100
    ST TEMP
    LD HUNDREDS
    ADD #1
    ST HUNDREDS
    JUMP COUNT_HUNDREDS

COUNT_TENS:
    LD TEMP
    CMP #10
    BMI SAVE_UNITS
    SUB #10
    ST TEMP
    LD TENS
    ADD #1
    ST TENS
    JUMP COUNT_TENS

SAVE_UNITS:
    LD TEMP
    ST UNITS

PRINT_HUNDREDS:
    LD HUNDREDS
    BEQ ZERO_HUNDREDS
    ADD #0x20
    OUT 0x14
    JUMP PRINT_TENS

ZERO_HUNDREDS:
    LD TENS
    BEQ PRINT_UNITS
    ADD #0x10
    OUT 0x14
    JUMP PRINT_UNITS  

PRINT_TENS:
    LD TENS
    ADD #0x10
    OUT 0x14

PRINT_UNITS:
    LD UNITS
    OUT 0x14
    HLT

ORG 0x90
TEMP: WORD 0
HUNDREDS: WORD 0
TENS: WORD 0
UNITS: WORD 0
